(function(t){function e(e){for(var s,i,r=e[0],l=e[1],c=e[2],p=0,u=[];p<r.length;p++)i=r[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&u.push(o[i][0]),o[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(u.length)u.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={app:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("e778")},"09cb":function(t,e,n){var s=n("24fb");e=s(!1),e.push([t.i,".nabarx[data-v-0a643cec]{height:50px;margin-top:-30px;margin-bottom:30px}#title[data-v-0a643cec]{margin-left:40px}#uptime[data-v-0a643cec]{font-size:1rem;font-weight:600;margin-left:10px;margin-right:50px}#button[data-v-0a643cec]{margin-right:15px}",""]),t.exports=e},"26fd":function(t,e,n){var s=n("9304");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var o=n("499e").default;o("566d2b4e",s,!0,{sourceMap:!1,shadowMode:!1})},"321b":function(t,e,n){var s=n("24fb");e=s(!1),e.push([t.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:30px}",""]),t.exports=e},"383c":function(t,e,n){var s=n("f0ac");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var o=n("499e").default;o("0fde47fc",s,!0,{sourceMap:!1,shadowMode:!1})},"4f96":function(t,e,n){"use strict";n("383c")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Navbar"),n("vs-row",{attrs:{"vs-w":"12"}},[n("vs-col",{attrs:{"vs-offset":"0.4","vs-w":"6.4"}},[n("Comm")],1),n("vs-col",{attrs:{"vs-offset":"0.2","vs-w":"4.6"}},[n("Configuration"),n("Console",{attrs:{name:"comm",height:"500px"}})],1)],1)],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vs-card",{attrs:{id:"topology"}},[n("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[n("h3",[t._v("Network Topology ")])]),n("ECharts",{ref:"topo",attrs:{id:"chart",options:t.option,autoresize:""},on:{click:t.handleClick}}),n("vs-prompt",{attrs:{title:"Set link properties",active:t.activePrompt},on:{cancel:t.closePrompt,accept:t.acceptPrompt,close:t.closePrompt,"update:active":function(e){t.activePrompt=e}}},[n("div",{staticClass:"link-prompt"},[n("vs-row",{attrs:{"vs-align":"center","vs-type":"flex","vs-justify":"center","vs-w":"12"}},[n("vs-col",{attrs:{"vs-w":"1"}},[n("span",[t._v("Loss")])]),n("vs-col",{attrs:{"vs-offset":"2","vs-w":"5"}},[n("vs-input",{model:{value:t.tmpLoss,callback:function(e){t.tmpLoss=e},expression:"tmpLoss"}})],1)],1),n("vs-row",{staticStyle:{"margin-top":"3px","margin-bottom":"3px"},attrs:{"vs-align":"center","vs-type":"flex","vs-justify":"center","vs-w":"12"}},[n("vs-col",{attrs:{"vs-w":"1"}},[n("span",[t._v("Delay")])]),n("vs-col",{attrs:{"vs-offset":"2","vs-w":"5"}},[n("vs-input",{attrs:{placeholder:"100"},model:{value:t.tmpDelay,callback:function(e){t.tmpDelay=e},expression:"tmpDelay"}})],1)],1),n("vs-row",{attrs:{"vs-align":"center","vs-type":"flex","vs-justify":"center","vs-w":"12"}},[n("vs-col",{attrs:{"vs-w":"1"}},[n("span",[t._v("Bandwidth")])]),n("vs-col",{attrs:{"vs-offset":"2","vs-w":"5"}},[n("vs-input",{attrs:{placeholder:"100"},model:{value:t.tmpBandwidth,callback:function(e){t.tmpBandwidth=e},expression:"tmpBandwidth"}})],1)],1),n("vs-row",{attrs:{"vs-align":"center","vs-type":"flex","vs-justify":"center","vs-w":"12"}},[n("vs-col",{attrs:{"vs-w":"1"}},[n("span",[t._v("Distance")])]),n("vs-col",{attrs:{"vs-offset":"2","vs-w":"5"}},[n("vs-input",{attrs:{placeholder:"100"},model:{value:t.tmpDistance,callback:function(e){t.tmpDistance=e},expression:"tmpDistance"}})],1)],1)],1)])],1)},r=[],l=(n("b0c0"),n("99af"),n("9ca8")),c=(n("ef97"),n("23ee"),n("007d"),n("bc3a")),d=n.n(c),p={components:{ECharts:l["a"]},data:function(){var t=this;return{activePrompt:!1,selectedLink:"",tmpLoss:0,tmpDelay:1,tmpBandwidth:1,tmpDistance:1e3,linkStats:{},option:{tooltip:{trigger:"item",enterable:!0,formatter:function(e){if(e.name.indexOf(">")>0){var n={loss:"%",bandwidth:" Gbps",delay:" us"},s=t.linkStats[e.name];return e.name.indexOf("GCC")>0&&(n.delay=" s",n.bandwidth=" bps"),"Loss: "+s.Loss+n.loss+"<br>Delay: "+s.Delay+n.delay+"<br>Bandwidth: "+s.Bandwidth+n.bandwidth}return e.data.name}},series:[{type:"graph",layout:"none",symbolSize:45,lineStyle:{width:2.5,color:"#555"},emphasis:{lineStyle:{width:5,color:"#000"},label:{show:!0}},label:{show:!0,fontSize:15},center:[500,120],nodes:[{name:"GCC",x:-600,y:150,itemStyle:{color:"purple"}},{name:"HMS",x:0,y:150,itemStyle:{color:"darkred"}},{name:"AGT",x:200,y:-375},{name:"STR",x:750,y:-600},{name:"INV",x:1300,y:-375},{name:"PWR",x:1500,y:150},{name:"ECLSS",x:1300,y:675},{name:"INT",x:750,y:900},{name:"EXT",x:200,y:675},{name:"SW1",x:300,y:150,symbol:"rect",itemStyle:{color:"deepskyblue"}},{name:"SW2",x:425,y:-150,symbol:"rect",itemStyle:{color:"deepskyblue"}},{name:"SW3",x:750,y:-300,symbol:"rect",itemStyle:{color:"deepskyblue"}},{name:"SW4",x:1075,y:-150,symbol:"rect",itemStyle:{color:"deepskyblue"}},{name:"SW5",x:1200,y:150,symbol:"rect",itemStyle:{color:"deepskyblue"}},{name:"SW6",x:1075,y:450,symbol:"rect",itemStyle:{color:"deepskyblue"}},{name:"SW7",x:750,y:600,symbol:"rect",itemStyle:{color:"deepskyblue"}},{name:"SW8",x:425,y:450,symbol:"rect",itemStyle:{color:"deepskyblue"}},{name:"SW0",x:750,y:150,symbol:"rect",itemStyle:{color:"#0079A3"}}],links:[{source:"HMS",target:"GCC",lineStyle:{type:"dashed"},emphasis:{lineStyle:{type:"dashed"}}},{source:"HMS",target:"SW1"},{source:"AGT",target:"SW2"},{source:"STR",target:"SW3"},{source:"INV",target:"SW4"},{source:"PWR",target:"SW5"},{source:"ECLSS",target:"SW6"},{source:"INT",target:"SW7"},{source:"EXT",target:"SW8"},{source:"SW1",target:"SW2"},{source:"SW2",target:"SW3"},{source:"SW3",target:"SW4"},{source:"SW4",target:"SW5"},{source:"SW5",target:"SW6"},{source:"SW6",target:"SW7"},{source:"SW7",target:"SW8"},{source:"SW8",target:"SW1"},{source:"SW1",target:"SW0"},{source:"SW2",target:"SW0"},{source:"SW3",target:"SW0"},{source:"SW4",target:"SW0"},{source:"SW5",target:"SW0"},{source:"SW6",target:"SW0"},{source:"SW7",target:"SW0"},{source:"SW8",target:"SW0"}]},{z:-1,type:"graph",layout:"none",symbolSize:45,center:[500,110],label:{show:!0,fontSize:13,color:"black",fontFamily:"Menlo"},itemStyle:{color:"transparent"},nodes:[{name:"TX:0\nRX:0\n\ngcc",x:-600,y:70},{name:"TX:0\nRX:0\n\nhms",x:0,y:70},{name:"TX:0\nRX:0\n\nagt",x:200,y:-455},{name:"TX:0\nRX:0\n\nstr",x:750,y:-680},{name:"TX:0\nRX:0\n\ninv",x:1300,y:-455},{name:"TX:0\nRX:0\n\npwr",x:1500,y:70},{name:"TX:0\nRX:0\n\neclss",x:1300,y:595},{name:"TX:0\nRX:0\n\nint",x:750,y:820},{name:"TX:0\nRX:0\n\next",x:200,y:595},{name:"TX:0\nRX:0\n\nsw0",x:750,y:70},{name:"TX:0\nRX:0\n\nsw1",x:300,y:70},{name:"TX:0\nRX:0\n\nsw2",x:425,y:-230},{name:"TX:0\nRX:0\n\nsw3",x:750,y:-380},{name:"TX:0\nRX:0\n\nsw4",x:1075,y:-230},{name:"TX:0\nRX:0\n\nsw5",x:1200,y:70},{name:"TX:0\nRX:0\n\nsw6",x:1075,y:370},{name:"TX:0\nRX:0\n\nsw7",x:750,y:520},{name:"TX:0\nRX:0\n\nsw8",x:425,y:370}]}]}}},methods:{initLinkStat:function(){this.linkStats={};for(var t=0;t<this.option.series[0].links.length;t++){var e=this.option.series[0].links[t],n=e.source+" > "+e.target;this.linkStats[n]={Loss:0,Delay:1,Bandwidth:1},n.indexOf("GCC")>0&&(this.linkStats[n]={Loss:0,Delay:600,Bandwidth:2e3})}},handleClick:function(t){t.name.length<=5||(this.selectedLink=t.name,this.activePrompt=!0)},closePrompt:function(){this.activePrompt=!1},acceptPrompt:function(){window.console.log(this.tmpDelay,this.selectedLink),this.linkStats[this.selectedLink].Loss=this.tmpLoss,this.linkStats[this.selectedLink].Delay=this.tmpDelay,this.linkStats[this.selectedLink].Bandwidth=this.tmpBandwidth,d.a.get("http://localhost:8000/api/link/".concat(this.selectedLink,"?loss=").concat(this.tmpLoss,"&distance=").concat(this.tmpDelay,"&bandwidth=").concat(this.tmpBandwidth)),this.activePrompt=!1}},mounted:function(){var t=this;window.topo=this,this.initLinkStat();var e={GCC:{id:0,nick:"gcc"},HMS:{id:1,nick:"hms"},AGT:{id:2,nick:"agt"},STR:{id:3,nick:"str"},INV:{id:4,nick:"inv"},PWR:{id:5,nick:"pwr"},ECLSS:{id:6,nick:"eclss"},INT:{id:7,nick:"int"},EXT:{id:8,nick:"ext"},SW0:{id:9,nick:"sw0"},SW1:{id:10,nick:"sw1"},SW2:{id:11,nick:"sw2"},SW3:{id:12,nick:"sw3"},SW4:{id:13,nick:"sw4"},SW5:{id:14,nick:"sw5"},SW6:{id:15,nick:"sw6"},SW7:{id:16,nick:"sw7"},SW8:{id:17,nick:"sw8"}};this.$EventBus.$on("stats_comm",(function(n){for(var s in n)window.console.log(s,e[s],t.option.series[1].nodes[e[s].id].name),t.option.series[1].nodes[e[s].id].name="TX:"+n[s][0]+"\nRX:"+n[s][1]+"\n\n"+e[s].nick}))}},u=p,f=(n("9b56"),n("2877")),m=Object(f["a"])(u,i,r,!1,null,"60da6f4b",null),h=m.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vs-card",{attrs:{id:"config"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h3",[t._v("Settings")])]),n("h3",[t._v("In-habitat (Wire):")]),t._v("\n  Bandwidth: 1Gbps"),n("br"),t._v("\n  Speed: .77 c"),n("br"),t._v("\n  Distance: 30 meter"),n("br"),t._v("\n  One-way delay:  < 1 us\n  "),n("h3",[t._v("Earth-Mars (Wireless):")]),t._v("\n  Bandwidth: 18000bps (500 ~ 32000)"),n("br"),t._v("\n  Speed: c"),n("br"),t._v("\n  Distance: 54,500,000 ~ 401,300,000 km"),n("br"),t._v("\n  One-way delay: 3~22 min\n")])},y=[],g={},S=g,b=(n("871e"),Object(f["a"])(S,v,y,!1,null,"63ae5b25",null)),w=b.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vs-card",{attrs:{id:"console"}},[n("div",{staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[n("h3",[t._v("Console")])]),n("textarea",{ref:"logs",style:t.cssVars,attrs:{autofocus:"",id:"logs",disabled:""},domProps:{value:t.log},on:{change:function(e){return t.log=e}}})])},k=[],W={data:function(){return{dropped:!1,ws:{},cnt:0,log:""}},props:["name","height"],computed:{cssVars:function(){return{"--height":this.height}}},methods:{startWS:function(){var t=this,e=window.location;e.host,this.ws=new WebSocket("ws://localhost:8000/ws/"+this.name),this.ws.onopen=function(){t.dropped=!1,t.log="[+] Console connected",t.$nextTick((function(){t.$refs.logs.scrollTop=t.$refs.logs.scrollHeight}))},this.ws.onclose=function(){t.dropped?t.log+=".":t.log+="\n[!] Connection dropped, trying to reconnect...",t.dropped=!0,t.$nextTick((function(){t.$refs.logs.scrollTop=t.$refs.logs.scrollHeight})),setTimeout(t.startWS,1e3)},this.ws.onmessage=function(e){t.cnt>1e3&&t.cnt%1e3==1&&(t.log=""),t.cnt++;var n=JSON.parse(e.data);n.type,0==n.type&&(t.log+="\n[*] "+n.msg,t.$nextTick((function(){t.$refs.logs.scrollTop=t.$refs.logs.scrollHeight}))),1==n.type&&t.$EventBus.$emit("stats_"+t.name,n["stats_"+t.name])}}},mounted:function(){this.startWS()}},_=W,T=(n("4f96"),Object(f["a"])(_,x,k,!1,null,"64e852b0",null)),X=T.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vs-navbar",{staticClass:"nabarx",model:{value:t.activeItem,callback:function(e){t.activeItem=e},expression:"activeItem"}},[n("div",{attrs:{slot:"title",id:"title"},slot:"title"},[n("vs-navbar-title",[t._v("\n        MCVT - Communication Network\n      ")])],1),n("vs-navbar-item",{attrs:{id:"uptime",index:"2"}},[t._v("\n      Uptime: "+t._s(t.d)+" day"),t.d>1?n("span",[t._v("s")]):t._e(),t._v(" "+t._s(t.h.toString().padStart(2,"0"))+":"+t._s(t.m.toString().padStart(2,"0"))+":"+t._s(t.s.toString().padStart(2,"0"))+"\n    ")])],1)],1)},C=[],R={data:function(){return{popupActive:!1,activeItem:0,boottime:0,started:!1,s:0,m:0,h:0,d:0}},methods:{getUpTime:function(){var t=this;d.a.get("http://localhost:8000/api/boottime").then((function(e){t.boottime=parseInt(e.data),setInterval((function(){var e=Date.now();e=Math.floor(e/1e3),t.s=Math.floor((e-t.boottime)%60),t.m=Math.floor((e-t.boottime)/60%60),t.h=Math.floor((e-t.boottime)/3600%24),t.d=Math.floor((e-t.boottime)/86400)}),1e3)}))},getStarted:function(){var t=this;d.a.get("http://localhost:8000/api/started").then((function(e){var n=parseInt(e.data);t.started="1"==n}))},startAll:function(){this.started=!0,d.a.get("http://localhost:8000/api/start"),this.$vs.notify({title:"Run",color:"primary",time:"4000"})},stopAll:function(){this.$vs.notify({title:"Stop",color:"primary",time:"4000"}),this.started=!1,this.$EventBus.$emit("stopAll",1),d.a.get("http://localhost:8000/api/stop")},option:function(){}},mounted:function(){this.getUpTime()}},L=R,$=(n("9eda"),Object(f["a"])(L,M,C,!1,null,"0a643cec",null)),O=$.exports,P={name:"App",components:{Comm:h,Console:X,Navbar:O,Configuration:w}},D=P,j=(n("034f"),Object(f["a"])(D,o,a,!1,null,null,null)),B=j.exports,E=n("fb9a"),I=n.n(E);n("04f2"),n("c789"),n("15f5"),n("7051");s["default"].config.productionTip=!1,s["default"].prototype.$EventBus=new s["default"],s["default"].use(I.a),s["default"].prototype.axios=d.a,new s["default"]({render:function(t){return t(B)}}).$mount("#app")},"871e":function(t,e,n){"use strict";n("e615")},9304:function(t,e,n){var s=n("24fb");e=s(!1),e.push([t.i,"#topology[data-v-60da6f4b]{width:100%;height:830px}#chart[data-v-60da6f4b]{width:100%;height:700px}.link-prompt[data-v-60da6f4b]{font-size:1rem}",""]),t.exports=e},"9b56":function(t,e,n){"use strict";n("26fd")},"9eda":function(t,e,n){"use strict";n("d663")},b95d:function(t,e,n){var s=n("24fb");e=s(!1),e.push([t.i,"#config[data-v-63ae5b25]{text-align:left}",""]),t.exports=e},d663:function(t,e,n){var s=n("09cb");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var o=n("499e").default;o("4f439d3e",s,!0,{sourceMap:!1,shadowMode:!1})},e615:function(t,e,n){var s=n("b95d");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var o=n("499e").default;o("0548d5f6",s,!0,{sourceMap:!1,shadowMode:!1})},e778:function(t,e,n){var s=n("321b");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var o=n("499e").default;o("fa1ef42a",s,!0,{sourceMap:!1,shadowMode:!1})},f0ac:function(t,e,n){var s=n("24fb");e=s(!1),e.push([t.i,"#logs[data-v-64e852b0]{margin-top:1px;width:100%;height:var(--height);font-size:.8rem;line-height:1.3;border-radius:6px;padding:3px;box-sizing:border-box;resize:none;outline:none;text-transform:none;text-decoration:none}textarea[data-v-64e852b0]{border:none}textarea[data-v-64e852b0]:disabled{background:#fff}",""]),t.exports=e}});
//# sourceMappingURL=app.308edde5.js.map